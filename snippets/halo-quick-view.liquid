{%- liquid
    assign layout = settings.quick_view_layout
    assign current_variant = product.selected_or_first_available_variant
    assign variantCount = product.variants | size
    assign featured_media_aspect_ratio = product.featured_media.aspect_ratio
    if product.featured_media.aspect_ratio == nil
        assign featured_media_aspect_ratio = 1
    endif
    assign media_size = settings.quick_view_product_image_ratio
    assign portrait_aspect_ratio = settings.quick_view_portrait_aspect_ratio | append: '%'
    assign quick_view_zoomed_image = settings.quick_view_zoomed_image
    assign show_quick_view_badge = settings.show_quick_view_badge
    assign show_quick_view_review = settings.show_quick_view_review
    assign show_quick_view_sold_in = settings.show_quick_view_sold_in
    if show_quick_view_sold_in
        assign quick_view_sold_in_number = settings.quick_view_sold_in_number
        assign quick_view_sold_in_hours = settings.quick_view_sold_in_hours
    endif
    assign show_quick_view_short_description = settings.show_quick_view_short_description
    assign show_countdown = settings.show_countdown
    if show_countdown
        assign countdown_type = settings.countdown_type
        assign countdown_time = settings.countdown_time
        assign countdown_collection = settings.countdown_collection | downcase | handle
    endif
    assign show_quick_view_vendor = settings.show_quick_view_vendor
    assign show_quick_view_availability = settings.show_quick_view_availability
    assign show_quick_view_sku = settings.show_quick_view_sku
    assign show_quick_view_product_type = settings.show_quick_view_product_type
    assign quick_view_picker_type = settings.quick_view_picker_type
    assign show_hot_stock = settings.show_hot_stock
    if show_hot_stock
        assign productMaxStock = settings.hot_stock_limit | plus: 0
    endif
    assign show_quick_view_qty = settings.show_quick_view_qty
    assign show_quick_view_subtotal = settings.show_quick_view_subtotal
    assign show_subtotal = false
    assign subtotal = 0
    if show_quick_view_subtotal and show_quick_view_qty
        assign show_subtotal = true
        assign subtotal = current_variant.price | money
    endif
    assign show_quick_view_customer_viewing = settings.show_quick_view_customer_viewing
    if show_quick_view_customer_viewing
        assign quick_view_customer_viewing_number = settings.quick_view_customer_viewing_number
        assign quick_view_customer_viewing_time = settings.quick_view_customer_viewing_time
    endif
    assign show_quick_view_trust_image = settings.show_quick_view_trust_image
    assign show_quick_view_share = settings.show_quick_view_share
    if show_quick_view_share
        assign share_product_type = settings.share_product_type
        if share_product_type == 'addthis'
            assign share_product_script = settings.share_product_script
        endif
    endif
-%}

<style type="text/css">
    .quickView .productView-thumbnail .productView-thumbnail-link:after{
        padding-bottom: {{ portrait_aspect_ratio }};
    }
</style>

{% if variantCount > 0  and product.has_only_default_variant != true  %}
    <script>
        window.quick_view_inven_array_{{ product.id }} = {
            {% for variant in product.variants %}
                '{{ variant.id }}': '{{ variant.inventory_quantity }}',
            {%endfor%}
        };
    </script>
{% endif %}
<script>
    window.quick_view_subtotal = {
        show: {{ show_subtotal }},
        text: `{{ 'products.product.sub_total' | t : value : '[value]' }}`
    };
</script>
<div class="productView quickView halo-quickView layout-{{ layout }}{% if product.media.size == 0 %} productView-no-media{% endif %}">
    <div class="productView-top">
    	<div class="halo-productView-left halo-quickView-left productView-images clearfix" data-image-gallery>
            <div class="productView-images-wrapper">
                <div class="productView-image-wrapper">
                    {%- if show_quick_view_badge -%}
                        {% render 'product-badge',
                            product: product,
                            class: 'productView-badge',
                            badge_detail: true,
                            serial: 1
                        %}
                    {%- endif -%}
                    <div class="productView-nav" data-image-gallery-main>
                        {%- for media in product.media -%}
                            {%- case media.media_type -%}
                                {%- when 'image' -%}
                                    <div class="productView-image productView-image-{{ media_size }} filter-{{ media.alt | handle }}">
                                        <div class="productView-img-container product-single__media" data-media-id="{{ media.id }}"
                                            {% if product.featured_media %}
                                                {% if media_size == 'adapt' %}
                                                    style="padding-bottom: {{ 1 | divided_by: featured_media_aspect_ratio | times: 100 }}%;"
                                                {% elsif media_size == 'square' %}
                                                    style="padding-bottom: 100%;"
                                                {% elsif media_size == 'portrait' %}
                                                    {% if portrait_aspect_ratio != blank %}
                                                        style="padding-bottom: {{ portrait_aspect_ratio }};"
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        >
                                            <div class="media" {% if quick_view_zoomed_image %} data-zoom-image="{{ media.preview_image | img_url: 'master' }}"{% endif %}>
                                                <img id="product-featured-image-{{ media.id }}"
                                                    srcset="{% if media.preview_image.width >= 288 %}{{ media.preview_image | img_url: '288x' }} 288w,{% endif %}
                                                            {% if media.preview_image.width >= 576 %}{{ media.preview_image | img_url: '576x' }} 576w,{% endif %}
                                                            {% if media.preview_image.width >= 550 %}{{ media.preview_image | img_url: '550x' }} 550w,{% endif %}
                                                            {% if media.preview_image.width >= 1100 %}{{ media.preview_image | img_url: '1100x' }} 1100w{% endif %}"
                                                    src="{{ media | img_url: 'master' }}"
                                                    alt="{{ media.preview_image.alt | escape }}"
                                                    title="{{ media.preview_image.alt | escape }}"
                                                    sizes="(min-width: 1200px) calc((1200px - 10rem) / 2), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
                                                    loading="lazy"
                                                    data-sizes="auto"
                                                    data-main-image
                                                >
                                            </div>
                                        </div>
                                    </div>
                                {%- when 'external_video' -%}
                                    <div class="productView-image productView-image-{{ media_size }}">
                                        <div class="productView-img-container product-single__media" data-media-id="{{ media.id }}"
                                            {% if media_size == 'adapt' %}
                                                style="padding-bottom: {{ 1 | divided_by: featured_media_aspect_ratio | times: 100 }}%;"
                                            {% elsif media_size == 'square' %}
                                                style="padding-bottom: 100%;"
                                            {% elsif media_size == 'portrait' %}
                                                {% if portrait_aspect_ratio != blank %}
                                                    style="padding-bottom: {{ portrait_aspect_ratio }};"
                                                {% endif %}
                                            {% endif %}
                                        >
                                            {%- if media.host == 'youtube' -%}
                                                <div class="media has-video">
                                                    <img
                                                        srcset="https://i.ytimg.com/vi/{{ media.external_id }}/maxresdefault.jpg"
                                                        src="https://i.ytimg.com/vi/{{ media.external_id }}/maxresdefault.jpg"
                                                        alt="{{ media.alt | escape }}"
                                                        title="{{ media.alt | escape }}"
                                                        sizes="(min-width: 1200px) calc((1200px - 10rem) / 2), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
                                                        loading="lazy"
                                                        data-sizes="auto"
                                                    >
                                                </div>
                                                <div class="productView-video youtube">
                                                    <div data-youtube="{{ media.external_id }}"></div>
                                                </div>
                                            {%- else -%}
                                                <div class="media has-video">
                                                    <img
                                                        srcset="{{ media | img_url: 'master' }}"
                                                        src="{{ media | img_url: 'master' }}"
                                                        alt="{{ media.alt | escape }}"
                                                        title="{{ media.alt | escape }}"
                                                        sizes="(min-width: 1200px) calc((1200px - 10rem) / 2), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
                                                        loading="lazy"
                                                        data-sizes="auto"
                                                    >
                                                </div>
                                                <div class="productView-video vimeo" data-vimeo>
                                                    {{ media | external_video_tag }}
                                                </div>
                                            {%- endif -%}
                                        </div>
                                    </div>
                                {%- when 'video' -%}
                                    <div class="productView-image productView-image-{{ media_size }}">
                                        <div class="productView-img-container product-single__media" data-media-id="{{ media.id }}"
                                            {% if media_size == 'adapt' %}
                                                style="padding-bottom: {{ 1 | divided_by: featured_media_aspect_ratio | times: 100 }}%;"
                                            {% elsif media_size == 'square' %}
                                                style="padding-bottom: 100%;"
                                            {% elsif media_size == 'portrait' %}
                                                {% if portrait_aspect_ratio != blank %}
                                                    style="padding-bottom: {{ portrait_aspect_ratio }};"
                                                {% endif %}
                                            {% endif %}
                                        >
                                            <div class="media has-video">
                                                <img
                                                    srcset="{{ media | img_url: 'master' }}"
                                                    src="{{ media | img_url: 'master' }}"
                                                    alt="{{ media.alt | escape }}"
                                                    title="{{ media.alt | escape }}"
                                                    sizes="(min-width: 1200px) calc((1200px - 10rem) / 2), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
                                                    loading="lazy"
                                                    data-sizes="auto"
                                                >
                                            </div>
                                            <div class="productView-video mp4" data-mp4>
                                                {{ media | video_tag: controls: true, image_size: 'master' }}
                                            </div>
                                        </div>
                                    </div>
                                {%- when 'model' -%}
                                    <div class="productView-image productView-image-{{ media_size }}">
                                        <div class="model-viewer-click productView-img-container product-single__media"
                                            {% if media_size == 'adapt' %}
                                                style="padding-bottom: {{ 1 | divided_by: featured_media_aspect_ratio | times: 100 }}%;"
                                            {% elsif media_size == 'square' %}
                                                style="padding-bottom: 100%;"
                                            {% elsif media_size == 'portrait' %}
                                                {% if portrait_aspect_ratio != blank %}
                                                    style="padding-bottom: {{ portrait_aspect_ratio }};"
                                                {% endif %}
                                            {% endif %}
                                        >
                                            {{ media | model_viewer_tag: image_size: '500x', 
                                                reveal: 'interaction', 
                                                toggleable: true, 
                                                data-model-id: media.id, 
                                                auto-rotate: true,
                                                id: 'paused-change-demo'
                                            }}
                                        </div>
                                    </div>
                                {%- else -%}
                                    <div class="productView-image productView-image-{{ media_size }}">
                                        <div class="productView-img-container product-single__media" data-media-id="{{ media.id }}"
                                            {% if media_size == 'adapt' %}
                                                style="padding-bottom: {{ 1 | divided_by: featured_media_aspect_ratio | times: 100 }}%;"
                                            {% elsif media_size == 'square' %}
                                                style="padding-bottom: 100%;"
                                            {% elsif media_size == 'portrait' %}
                                                {% if portrait_aspect_ratio != blank %}
                                                    style="padding-bottom: {{ portrait_aspect_ratio }};"
                                                {% endif %}
                                            {% endif %}
                                        >
                                            {{ media | media_tag }}
                                        </div>
                                    </div>
                            {%- endcase -%}
                        {%- endfor -%}
                    </div>
                </div>
                <div class="productView-thumbnail-wrapper">
                    <div class="productView-for clearfix">
                        {%- for media in product.media -%}
                            {%- case media.media_type -%}
                                {%- when 'image' -%}
                                    <div class="productView-thumbnail filter-{{ media.alt | handle }}" data-media-id="{{ product.id }}-{{ media.id }}">
                                        <a class="productView-thumbnail-link" href="javascript:void(0)" data-image="{{ media | img_url: 'original' }}">
                                            <img src="{{ media | img_url: 'compact' }}" alt="{{ media.alt | escape }}" title="{{ media.alt | escape }}">
                                        </a>
                                    </div>
                                {%- when 'external_video' -%}
                                    <div class="productView-thumbnail filter-{{ media.alt | handle }}" data-media-id="{{ product.id }}-{{ media.id }}">
                                        <div class="productView-thumbnail-link">
                                            <img src="{{ media | img_url: 'compact' }}" alt="{{ media.alt | escape }}" title="{{ media.alt | escape }}">
                                        </div>
                                        <div class="productView-thumbnail-icon">
                                            {% render 'icon-video' %}
                                        </div>
                                    </div>
                                {%- when 'video' -%}
                                    <div class="productView-thumbnail filter-{{ media.alt | handle }}" data-media-id="{{ product.id }}-{{ media.id }}">
                                        <div class="productView-thumbnail-link">
                                            <img src="{{ media | media_tag | split: 'src="' | last | split: '">' | first }}" alt="{{ media.alt | escape }}" title="{{ media.alt | escape }}"/>
                                        </div>
                                        <div class="productView-thumbnail-icon">
                                            {% render 'icon-video' %}
                                        </div>
                                    </div>
                                {%- when 'model' -%}
                                    <div class="productView-thumbnail" data-media-id="{{ product.id }}-{{ media.id }}">
                                        <div class="productView-thumbnail-link">
                                            <img src="{{ media | media_tag | split: 'poster="' | last | split: '">' | first }}" alt="{{ media.alt | escape }}" title="{{ media.alt | escape }}"/>
                                        </div>
                                        <div class="productView-thumbnail-icon">
                                            {%- render 'icon-3d-model' -%}
                                        </div>
                                    </div>
                                {%- else -%}
                                    <div class="productView-thumbnail filter-{{ media.alt | handle }}" data-media-id="{{ product.id }}-{{ media.id }}">
                                        <div class="productView-thumbnail-link">
                                            {{ media | media_tag }}
                                        </div>
                                    </div>
                            {%- endcase -%}
                        {%- endfor -%}
                    </div>
                </div>
            </div>
        </div>
        <div class="halo-productView-right halo-quickView-right productView-details clearfix">
            <div class="productView-product clearfix">
                <h1 class="productView-title">
                    <a href="{{ product.url }}">
                        {{ product.title | escape }}
                    </a>
                </h1>
                {%- if show_quick_view_review or show_quick_view_sold_in -%}
                    <div class="productView-meta clearfix">
                        {%- if show_quick_view_review -%}
                            <div class="productView-rating halo-productReview">
                                <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
                            </div>
                        {%- endif -%}
                        {%- if show_quick_view_sold_in -%}
                            <div class="productView-soldProduct" data-sold-out-product data-item="{{ quick_view_sold_in_number }}" data-hours="{{ quick_view_sold_in_hours }}" style="display: none;">
                                {% render 'icon-fire' %}
                                <span class="text">
                                    <span data-sold-out-number>2</span>
                                    {{ 'products.product.sold_in_last.text_1' | t }}
                                    <span data-sold-out-hours>8</span>
                                    {{ 'products.product.sold_in_last.text_2' | t }}
                                </span>
                            </div>
                        {%- endif -%}
                    </div>
                {%- endif -%}
                {%- if show_quick_view_short_description -%}
                    {%- liquid
                        assign desc = product.description
                        assign word_number = 50
                    -%}
                    {% if product.metafields.c_f.short_description %}
                        {%- liquid
                            assign desc = product.metafields.c_f.short_description
                            assign word_number = 100000
                        -%}
                    {% else %}
                        {% assign word_number = 50 %}
                    {% endif %}
                    {%- if desc != blank -%}
                        <div class="productView-desc halo-text-format">
                            {{ desc | truncatewords: word_number }}
                        </div>
                    {%- endif -%}
                {%- endif -%}
                {%- if show_quick_view_vendor or show_quick_view_availability or show_quick_view_sku or show_quick_view_product_type -%}
                    <div class="productView-info">
                        {%- if show_quick_view_sku -%}
                            <div class="productView-info-item" data-sku {% unless current_variant.sku != blank %} style="display: none;"{% endunless %}>
                                <span class="productView-info-name">
                                    {{ 'products.product.text.sku' | t }}
                                </span>
                                <span class="productView-info-value">{{ current_variant.sku }}</span>
                            </div>
                        {%- endif -%}
                        {%- if show_quick_view_vendor -%}
                            <div class="productView-info-item">
                                <span class="productView-info-name">
                                    {{ 'products.product.text.vendor' | t }}
                                </span>
                                <span class="productView-info-value">{{ product.vendor | link_to_vendor }}</span>
                            </div>
                        {%- endif -%}
                        {%- if show_quick_view_availability -%}
                            <div class="productView-info-item" data-inventory>
                                <span class="productView-info-name">
                                    {{ 'products.product.text.availability' | t }}
                                </span>
                                <span class="productView-info-value">
                                    {% if current_variant.inventory_management %}
                                        {%- assign first_inventory = current_variant.inventory_quantity -%}

                                        {%- if first_inventory > 0 -%}
                                            {{ 'products.product.in_stock' | t }}
                                        {%- else -%}
                                            {{ 'products.product.out_of_stock' | t }}
                                        {%- endif -%}
                                    {% else %}
                                        {{ 'products.product.many_in_stock' | t }}
                                    {% endif %}
                                </span>
                            </div>
                        {%- endif -%}
                        {%- if show_quick_view_product_type -%}
                            <div class="productView-info-item">
                                <span class="productView-info-name">
                                    {{ 'products.product.text.type' | t }}
                                </span>
                                <span class="productView-info-value">
                                    {{ product.type | escape }}
                                </span>
                            </div>
                        {%- endif -%}
                    </div>
                {%- endif -%}
                {%- if show_countdown -%}
                    {%- if countdown_type == 'all_product' -%}
                        <div class="productView-countDown countdown_{{ product.id }} clearfix" data-countdown-id="{{ product.id }}" data-countdown="{{ countdown_time }}">
                            <span class="text animated-loading">
                                <span>{{ 'countdown.general.text' | t }}</span>
                            </span>
                            <span class="num animated-loading">
                                <span>151<span>D</span></span>
                            </span>
                            <span class="num animated-loading">
                                <span>8<span>H</span></span>
                            </span>
                            <span class="num animated-loading">
                                <span>23<span>M</span></span>
                            </span>
                            <span class="num animated-loading">
                                <span>0<span>S</span></span>
                            </span>
                        </div>
                    {%- elsif countdown_type == 'collection_product' -%}
                        {%- liquid
                            assign hasCountdown = false
                            if countdown_collection != blank
                                for collection in product.collections
                                    assign collection_title = collection.title | downcase | handle
                                    if collection_title == countdown_collection
                                        assign hasCountdown = true
                                    endif
                                endfor
                            endif
                        -%}
                        {%- if hasCountdown -%}
                            <div class="productView-countDown countdown_{{ product.id }} clearfix" data-countdown-id="{{ product.id }}" data-countdown="{{ countdown_time }}">
                                <span class="text animated-loading">
                                    <span>{{ 'countdown.general.text' | t }}</span>
                                </span>
                                <span class="num animated-loading">
                                    <span>151<span>D</span></span>
                                </span>
                                <span class="num animated-loading">
                                    <span>8<span>H</span></span>
                                </span>
                                <span class="num animated-loading">
                                    <span>23<span>M</span></span>
                                </span>
                                <span class="num animated-loading">
                                    <span>0<span>S</span></span>
                                </span>
                            </div>
                        {%- endif -%}
                    {%- else -%}
                        {%- if product.metafields.c_f.countdown -%}
                            {% assign countdown_type = product.metafields.c_f.countdown %}
                            <div class="productView-countDown countdown_{{ product.id }} clearfix" data-countdown-id="{{ product.id }}" data-countdown="{{ countdown_type }}">
                                <span class="text animated-loading">
                                    <span>{{ 'countdown.general.text' | t }}</span>
                                </span>
                                <span class="num animated-loading">
                                    <span>151<span>D</span></span>
                                </span>
                                <span class="num animated-loading">
                                    <span>8<span>H</span></span>
                                </span>
                                <span class="num animated-loading">
                                    <span>23<span>M</span></span>
                                </span>
                                <span class="num animated-loading">
                                    <span>0<span>S</span></span>
                                </span>
                            </div>
                        {%- endif -%}
                    {%- endif -%}
                {%- endif -%}
                <div class="productView-price no-js-hidden clearfix" id="product-quick-view-price-{{ product.id }}">
                    {%- render 'price',
                        product: product,
                        use_variant: true,
                        price_class: 'price--large'
                    -%}
                </div>
                <div class="productView-options">
                    {%- assign product_form_installment_id = 'product-quick-view-form-installment-' | append: product.id -%}
                    {%- form 'product', product, id: product_form_installment_id, class: 'installment caption-large' -%}
                        <input type="hidden" name="id" value="{{ current_variant.id }}">
                        {{ form | payment_terms }}
                    {%- endform -%}
                    <div class="productView-variants halo-productOptions" id="product-quick-view-option-{{ product.id }}">
                        {%- if variantCount > 0  and product.has_only_default_variant != true  -%}
                            {%- if quick_view_picker_type == 'button' -%}
                                {%- assign product_swatch_option = settings.swatch | downcase -%}
                                <variant-quick-view-radios class="no-js-hidden product-option has-default" data-product="{{ product.id }}" data-url="{{ product.url }}">
                                    {%- for option in product.options_with_values -%}
                                        {%- liquid
                                            assign is_swatch = false
                                            assign option_name = option.name | downcase
                                            if product_swatch_option contains option_name
                                                assign is_swatch = true
                                            endif
                                            assign swatch_type = settings.swatch_type
                                            assign option_index = forloop.index0
                                        -%}
                                        <fieldset class="js product-form__input{% if is_swatch %} product-form__swatch{% endif %} clearfix" data-product-attribute="set-rectangle" data-option-index="{{ forloop.index0 }}">
                                            <legend class="form__label">
                                                {{ option.name | append: ':' }}
                                                <span data-header-option>
                                                    {{ option.selected_value }}
                                                </span>
                                            </legend>
                                            {%- assign values = '' -%}
                                            {%- for variant in product.variants -%}
                                                {%- assign value = variant.options[option_index] -%}
                                                {%- unless values contains value -%}
                                                    {%- liquid
                                                        assign values = values | join: ';'
                                                        assign values = values | append: ';' | append: value
                                                        assign values = values | split: ';'
                                                    -%}
                                                    <input class="product-form__radio" type="radio" id="option-quick-view-{{ product.id }}-{{ option.name }}-{{ forloop.index0 }}"
                                                        name="{{ option.name }}"
                                                        value="{{ value | escape }}"
                                                        {% if option.selected_value == value %}checked{% endif %}
                                                    >
                                                    {%- if is_swatch -%}
                                                        <label class="product-form__label {% if variant.available %} available{% else %} soldout{% endif %}" for="option-quick-view-{{ product.id }}-{{ option.name }}-{{ forloop.index0 }}">
                                                            {%- if variant.image %}
                                                                <span class="pattern" style="background-image: url({{ variant.image.src | product_img_url: '40x'}});">
                                                                </span>
                                                                <span class="expand">
                                                                    <img srcset="{{ variant.image.src | product_img_url: '75x'}}" src="{{ variant.image.src | product_img_url: '75x'}}" sizes="auto" loading="lazy">
                                                                </span>
                                                            {%- else -%}
                                                                {%- if swatch_type == 'png' -%}
                                                                    <span class="pattern" style="background-image: url({{ value | handle | append: '.' | append: file_extension | file_url }})">              
                                                                    </span>
                                                                {%- else -%}
                                                                    <span class="pattern" style="background-color: {{ value | split: ' ' | last | handle }};">              
                                                                    </span>
                                                                {%- endif -%}
                                                                <span class="tooltip">
                                                                    {{ value | escape }}
                                                                </span>
                                                            {%- endif -%}
                                                        </label>
                                                    {%- else -%}   
                                                        <label class="product-form__label{% if variant.available %} available{% else %} soldout{% endif %}" for="option-quick-view-{{ product.id }}-{{ option.name }}-{{ forloop.index0 }}">
                                                            <span class="text">{{ value }}</span>
                                                        </label>
                                                    {%- endif -%}
                                                {%- endunless -%}
                                            {%- endfor -%}
                                        </fieldset>
                                    {%- endfor -%}
                                    <script type="application/json">
                                        {{ product.variants | json }}
                                    </script>
                                </variant-quick-view-radios>
                            {%- else -%}
                                <variant-edit-selects class="no-js-hidden product-option has-default" data-product="{{ product.id }}" data-url="{{ product.url }}">
                                    {%- for option in product.options_with_values -%}
                                        <div class="product-form__input product-form__input--dropdown" data-product-attribute="set-select" data-option-index="{{ forloop.index0 }}">
                                            <label class="form__label" for="option-quick-view-{{ forloop.index0 }}">
                                                {{ option.name | append: ':' }}
                                                <span data-header-option>
                                                    {{ option.selected_value }}
                                                </span>
                                            </label>
                                            <div class="form__select select">
                                                <select id="option-quick-view-{{ forloop.index0 }}"
                                                    class="select__select"
                                                    name="options[{{ option.name | escape }}]"
                                                >
                                                    {%- for value in option.values -%}
                                                        <option value="{{ value | escape }}" {% if option.selected_value == value %}selected="selected"{% endif %}>
                                                            {{ value }}
                                                        </option>
                                                    {%- endfor -%}
                                                </select>
                                            </div>
                                        </div>
                                    {%- endfor -%}
                                    <script type="application/json">
                                        {{ product.variants | json }}
                                    </script>
                                </variant-edit-selects>
                            {%- endif -%}
                            {%- if show_hot_stock -%}
                                <div class="productView-hotStock" data-hot-stock="{{ productMaxStock }}">
                                    {%- if current_variant.inventory_management -%}
                                        {%- if current_variant.inventory_quantity > 0 and current_variant.inventory_quantity <= productMaxStock -%}
                                            {{ 'products.product.hot_stock' | t : inventory: current_variant.inventory_quantity }}
                                        {%- endif -%}
                                    {%- endif -%}
                                </div>
                            {%- endif -%}
                        {%- endif -%}
                    </div>
                    <noscript>
                        <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
                            <label class="form__label" for="Variants-{{ section.id }}">
                                {{ 'products.product.product_variants' | t }}
                            </label>
                            <div class="select">
                            <select name="id" id="Variants-{{ section.id }}" class="select__select" form="product-form">
                                {%- for variant in product.variants -%}
                                    <option
                                        {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                                        {% if variant.available == false %}disabled{% endif %}
                                        value="{{ variant.id }}"
                                    >
                                        {{ variant.title }}
                                        {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
                                        - {{ variant.price | money | strip_html }}
                                    </option>
                                {%- endfor -%}
                          </select>
                        </div>
                      </div>
                    </noscript>
                    {%- assign product_form_id = 'product-quick-view-form-' | append: product.id -%}
                    {%- form 'product', product, id: product_form_id, class: 'form productView-action', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
                        <div class="productView-group">
                            <div class="productView-groupTop">
                                {%- if show_quick_view_qty -%}
                                    <quantity-quick-view-input class="productView-quantity quantity__group clearfix">
                                        <label class="form-label quantity__label hiddenLabels" for="quantity-quick-view-{{ product.id }}">
                                            {{ 'products.product.quantity.label' | t }}
                                        </label>
                                        <input class="form-input quantity__input" type="number" name="quantity" min="1" value="1" inputmode="numeric" pattern="[0-9]*" id="quantity-quick-view-{{ product.id }}" data-product="{{ product.id }}" data-price="{{ current_variant.price }}">
                                    </quantity-quick-view-input>
                                {%- endif -%}
                                <div class="productView-action{% unless settings.show_wishlist %} productView-action-2{% endunless %}">
                                    <input type="hidden" name="id" value="{{ current_variant.id }}">
                                    <div class="product-form__buttons">
                                        {%- if current_variant.available -%}
                                            {%- if current_variant.inventory_management -%}
                                                {%- assign first_inventory = current_variant.inventory_quantity -%}
                                                <button
                                                    type="submit"
                                                    name="add"
                                                    data-btn-addToCart
                                                    class="product-form__submit button{% if first_inventory == 0 %} button-text-change{% else %}{% if show_subtotal %} button-text-change{% endif %}{% endif %}"
                                                    id="product-quick-view-add-to-cart">
                                                    {%- if first_inventory > 0 -%}
                                                        {%- if show_subtotal -%}
                                                            {%- assign subtotal = subtotal | strip_html -%}
                                                            {{ 'products.product.sub_total' | t : value : subtotal }}
                                                        {%- else -%}
                                                            {{ 'products.product.add_to_cart' | t}}
                                                        {%- endif -%}
                                                    {%- else -%}
                                                        {{ 'products.product.pre_order' | t }}
                                                    {%- endif -%}
                                                </button>
                                            {%- else -%}
                                                <button
                                                    type="submit"
                                                    name="add"
                                                    data-btn-addToCart
                                                    class="product-form__submit button{% if show_subtotal %} button-text-change{% endif %}"
                                                    id="product-quick-view-add-to-cart"
                                                >
                                                    {%- if show_subtotal -%}
                                                        {%- assign subtotal = subtotal | strip_html -%}
                                                        {{ 'products.product.sub_total' | t : value : subtotal }}
                                                    {%- else -%}
                                                        {{ 'products.product.add_to_cart' | t}}
                                                    {%- endif -%}
                                                </button>
                                            {%- endif -%}
                                        {%- else -%}
                                            <button
                                                type="submit"
                                                name="add"
                                                data-btn-addToCart
                                                class="product-form__submit button"
                                                id="product-quick-view-add-to-cart"
                                                disabled
                                            >
                                                {{ 'products.product.sold_out' | t }}
                                            </button>
                                        {%- endif -%}
                                    </div>
                                </div>
                                {%- if settings.show_wishlist -%}
                                    <div class="productView-wishlist clearfix">
                                        <a data-wishlist href="#" data-wishlist-handle="{{ product.handle }}" data-product-id="{{ product.id }}">
                                            <span class="visually-hidden">
                                                {{ 'wishlist.general.add' | t }}
                                            </span>
                                            {% render 'icon-heart' %}
                                        </a>
                                    </div>
                                {%- endif -%}
                            </div>
                        </div>
                    {%- endform -%}
                    {%- if settings.show_notify_form -%}
                        <div class="productView-notifyMe halo-notifyMe" style="display: none;">
                            {% render 'halo-notify-sold-out',
                                id: product.id,
                                current_variant: current_variant
                            %}
                        </div>
                    {%- endif -%}
                    {%- if show_quick_view_customer_viewing or show_quick_view_trust_image or show_quick_view_share -%}
                        <div class="productView-more">
                            {%- if show_quick_view_customer_viewing -%}
                                <div class="productView-moreItem">
                                    <div class="productView-ViewingProduct" data-customer-view="{{ quick_view_customer_viewing_number }}" data-customer-view-time="{{ quick_view_customer_viewing_time }}">
                                        {% render 'icon-eyes' %}
                                        <span class="text">{{ 'customer_viewing.general.text' | t: number : '10' }}</span>
                                    </div>
                                </div>
                            {%- endif -%}
                            {%- if show_quick_view_share -%}
                                <div class="productView-moreItem">
                                    {% render 'halo-share',
                                        product: product,
                                        share_product_type: share_product_type,
                                        share_product_script: share_product_script
                                    %}
                                </div>
                            {%- endif -%}
                            {%- if show_quick_view_trust_image -%}
                                <div class="productView-moreItem">
                                    <div class="productView-securityImage">
                                        {%- render 'halo-trust-image',
                                            type: 'product'
                                        -%}
                                    </div>
                                </div>
                            {%- endif -%}
                        </div>
                    {%- endif -%}
                </div>
            </div>
        </div>
    </div>
</div>