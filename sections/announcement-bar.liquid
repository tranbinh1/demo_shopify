{%- for block in section.blocks -%}
    {%- case block.type -%}
        {%- when 'announcement' -%}
            <div class="announcement-bar color-{{ block.settings.color_scheme }}" role="region" aria-label="{{ 'sections.header.announcement' | t }}">
                {%- if block.settings.text != blank -%}
                    {%- if block.settings.link != blank -%}
                        <a href="{{ block.settings.link }}" class="announcement-bar__link link link--text focus-inset animate-arrow">
                    {%- endif -%}
                        <span class="announcement-bar__message text-center{% if block.settings.uppercase %} uppercase{% endif %}">
                            {{ block.settings.text }}
                            {%- if block.settings.link != blank -%}
                                {% render 'icon-arrow' %}
                            {%- endif -%}
                        </span>
                    {%- if block.settings.link != blank -%}
                        </a>
                    {%- endif -%}
                {%- endif -%}
            </div>
    {%- endcase -%}
{%- endfor -%}

{% style %}
    .color-accent-1 .announcement-bar__message .text-code,
    .color-accent-2 .announcement-bar__message .text-code{
        background-color: var(--color-base-accent-text);
    }

    .color-accent-1 .announcement-bar__message .text-code{
        color: var(--color-base-accent-1);
    }

    .color-accent-2 .announcement-bar__message .text-code{
        color: var(--color-base-accent-2);
    }
{% endstyle %}

{% schema %}
{
    "name": "t:sections.announcement-bar.name",
    "max_blocks": 12,
    "blocks": [
        {
            "type": "announcement",
            "name": "t:sections.announcement-bar.blocks.announcement.name",
            "settings": [
                {
                    "type": "html",
                    "id": "text",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.text.label",
                    "default": "<p>Welcome to our store</p>"
                },
                {
                    "type": "checkbox",
                    "id": "uppercase",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.uppercase.label",
                    "default": true
                },
                {
                    "type": "select",
                    "id": "color_scheme",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.label",
                    "default": "accent-1",
                    "options": [
                        {
                            "value": "accent-1",
                            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__1.label"
                        },
                        {
                            "value": "accent-2",
                            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__2.label"
                        }
                    ]
                },
                {
                    "type": "url",
                    "id": "link",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
                }
            ]
        }
    ],
    "default": {
        "blocks": [
            {
                "type": "announcement"
            }
        ]
    }
}
{% endschema %}


